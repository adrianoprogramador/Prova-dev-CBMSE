<%= form_with(model: pessoa, local: true) do |form| %>
  <% if pessoa.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(pessoa.errors.count, "erro") %> impediu o registro de ser salvo:</h2>
      <div class="alert alert-danger alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
                
        <ul>
          <h4>Alerta!</h4>
        <% pessoa.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>        
      </div>
    </div>
  <% end %>

  <div class="form-group">
    <%= form.label :nome %>
    <%= form.text_field :nome, class:"form-control", placeholder:"Digite o primeiro nome"  %>
  </div>

  <div class="form-group">
    <%= form.label :sobrenome %>
    <%= form.text_field :sobrenome, class:"form-control", placeholder:"Digite o sobrenome" %>
  </div>

  <br>
  
  <h2>Contatos</h2>
  
  <hr>
  
  <div id="contato_pessoas">
    <%= form.fields_for :contato_pessoas do |contato_pessoas_fields| %>      
      <%= render partial: "contato_pessoa_fields", locals: { f: contato_pessoas_fields} %>      
    <% end %>
    <%= link_to_add_association '[Adicionar Contato]', form, :contato_pessoas %>
  </div>

  <div class="actions">
    <br>
    <%= form.submit "Confirmar", class:"btn btn-primary" %>
    <%= link_to "Voltar", pessoas_path, class:"btn btn-danger" %>
  </div>
<% end %>
<br>
